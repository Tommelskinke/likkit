CREATE TABLE users( 
	user_id INTEGER PRIMARY KEY AUTO_INCREMENT,
	user_type VARCHAR(20) DEFAULT 'user',
	username VARCHAR(20) UNIQUE,
	password VARCHAR(255));

CREATE TABLE tag( 
	tag_id INTEGER PRIMARY KEY AUTO_INCREMENT, 
	tag_name VARCHAR(20));

CREATE TABLE question_tag( 
	question_id INTEGER, 
	tag_id INTEGER);

CREATE TABLE standard_pfp(
	pfp_id INTEGER PRIMARY KEY AUTO_INCREMENT,
	pfp_link TINYTEXT);

CREATE TABLE question( 
	question_id INTEGER PRIMARY KEY AUTO_INCREMENT,
	user_id INTEGER,
	title TINYTEXT,
	content MEDIUMTEXT,
	created_at VARCHAR(20),
	upvotes INTEGER DEFAULT 0,
	downvotes INTEGER DEFAULT 0,
	karma INTEGER DEFAULT 0);

CREATE TABLE answer( 
	answer_id INTEGER PRIMARY KEY AUTO_INCREMENT,
	parent_answer_id INTEGER DEFAULT null,
	question_id INTEGER,
	user_id INTEGER,
	best_answer BOOLEAN DEFAULT false,
	content MEDIUMTEXT,
	created_at VARCHAR(20),
	upvotes INTEGER DEFAULT 0,
	downvotes INTEGER DEFAULT 0,
	karma INTEGER DEFAULT 0);

ALTER TABLE question_tag ADD CONSTRAINT question_id_fk1 FOREIGN KEY(question_id) REFERENCES question (question_id); 
ALTER TABLE question_tag ADD CONSTRAINT question_id_fk2 FOREIGN KEY(tag_id) REFERENCES tag (tag_id); 

ALTER TABLE question ADD CONSTRAINT question_fk2 FOREIGN KEY(user_id) REFERENCES users (user_id); 

ALTER TABLE answer ADD CONSTRAINT answer_fk1 FOREIGN KEY(question_id) REFERENCES question (question_id); 
ALTER TABLE answer ADD CONSTRAINT answer_fk2 FOREIGN KEY(user_id) REFERENCES users (user_id);

INSERT INTO tag VALUES(1, 'solved');
INSERT INTO tag VALUES(2, 'JS');
INSERT INTO tag VALUES(3, 'Rust');
INSERT INTO tag VALUES(4, 'Linux');

INSERT INTO users VALUES(DEFAULT,'admin', 'Oscar', 'Password1!');
INSERT INTO users VALUES(DEFAULT, 'user', 'Vegard', 'Password1!');
INSERT INTO users VALUES(DEFAULT, 'admin', 'Elias', 'Password1!');
INSERT INTO users VALUES(DEFAULT, 'user', 'Trygve', 'Password1!');

INSERT INTO question VALUES(DEFAULT, 1, 'Hjelp, igjen', 'Jeg trenger hjelp med noe, igjen.', DEFAULT, 0, 0, 0);

INSERT INTO answer VALUES(DEFAULT, NULL, 8, 1, false, 'Her er svaret', DEFAULT, 0, 0, 0);

INSERT INTO question_tag VALUES(8, 1);

INSERT INTO favorites VALUES(DEFAULT, 8, NULL, 1);